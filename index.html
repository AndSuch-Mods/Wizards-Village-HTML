<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Mage Valley – Prototype Menu Flow</title>
  <style>
    :root {
      color-scheme: dark;
      --bg: radial-gradient(circle at top, #1f2445, #0b0e1d 60%);
      --panel: linear-gradient(145deg, #1c2038, #121525);
      --accent: #9cd164;
      --muted: #b6bedf;
      --outline: rgba(255, 255, 255, 0.08);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--bg);
      color: #e7ecff;
      padding: 32px 18px;
    }

    main {
      width: min(960px, 100%);
      background: rgba(5, 7, 20, 0.8);
      border: 1px solid var(--outline);
      border-radius: 18px;
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.5);
      padding: 26px;
      display: grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 20px;
    }

    header {
      grid-column: 1 / -1;
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      border-bottom: 1px solid var(--outline);
      padding-bottom: 10px;
      margin-bottom: 6px;
    }

    h1 {
      letter-spacing: 0.12em;
      font-size: 1.4rem;
    }

    header p {
      color: var(--muted);
      font-size: 0.95rem;
    }

    #screenWrapper {
      grid-column: 1 / -1;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    .panel {
      background: var(--panel);
      border-radius: 14px;
      border: 1px solid var(--outline);
      padding: 16px 18px;
      box-shadow: 0 14px 32px rgba(0, 0, 0, 0.35);
      display: flex;
      flex-direction: column;
      gap: 10px;
      min-height: 280px;
    }

    .panel h2 {
      font-size: 1rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #d6ddff;
    }

    .panel p {
      color: var(--muted);
      line-height: 1.5;
    }

    button, input, select {
      font: inherit;
    }

    .btn {
      background: linear-gradient(135deg, #7ac45a, #96d768);
      color: #0e1a0e;
      border: none;
      border-radius: 999px;
      padding: 10px 12px;
      font-weight: 700;
      letter-spacing: 0.04em;
      cursor: pointer;
      transition: transform 0.1s ease, box-shadow 0.1s ease, filter 0.1s ease;
      box-shadow: 0 10px 26px rgba(0, 0, 0, 0.35);
    }

    .btn.secondary {
      background: linear-gradient(135deg, #5f7bff, #7f9cff);
      color: #0c1027;
    }

    .btn.ghost {
      background: rgba(255, 255, 255, 0.06);
      color: #e7ecff;
      border: 1px solid var(--outline);
      box-shadow: none;
    }

    .btn:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
    }

    .btn:active { transform: translateY(0); }

    .screen {
      display: none;
      flex-direction: column;
      gap: 12px;
      height: 100%;
    }

    .screen.active { display: flex; }

    .stack {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .field label {
      display: block;
      font-size: 0.85rem;
      color: var(--muted);
      margin-bottom: 4px;
    }

    .field input, .field select {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid var(--outline);
      color: #f7fbff;
    }

    .saveList {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .saveCard {
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--outline);
      background: rgba(255, 255, 255, 0.04);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }

    .saveCard strong { color: #e7ecff; }
    .saveCard span { color: var(--muted); font-size: 0.85rem; }

    #preview {
      background: repeating-linear-gradient(45deg, rgba(255,255,255,0.02) 0 12px, rgba(255,255,255,0.05) 12px 24px),
                  radial-gradient(circle at 20% 20%, rgba(156, 209, 100, 0.2), transparent 34%),
                  radial-gradient(circle at 70% 60%, rgba(127, 169, 255, 0.15), transparent 44%),
                  #0f1226;
      border-radius: 14px;
      border: 1px solid var(--outline);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.04);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 320px;
      color: var(--muted);
      text-align: center;
      padding: 18px;
    }

    #gameStage {
      width: 100%;
      height: 100%;
      background: #1a3f1d;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #d7ffd1;
      font-weight: 700;
      letter-spacing: 0.08em;
      border: 2px dashed rgba(255,255,255,0.12);
    }

    @media (max-width: 860px) {
      main { grid-template-columns: 1fr; }
      #screenWrapper { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <main>
    <header>
      <div>
        <h1>MAGE VALLEY</h1>
        <p>Prototype menu flow — character ➜ zone ➜ placeholder map</p>
      </div>
      <button class="btn ghost" id="backToStart" aria-label="Back to start menu">Back</button>
    </header>

    <section id="screenWrapper">
      <div class="panel">
        <h2>Flow</h2>
        <div id="startScreen" class="screen active" role="group" aria-label="Start screen">
          <p>Begin a new save file or continue an existing journey. Only one screen is visible at a time.</p>
          <div class="stack">
            <button class="btn" id="newCharacter">New Character</button>
            <button class="btn secondary" id="openSaves">Load Save</button>
          </div>
        </div>

        <div id="saveScreen" class="screen" role="group" aria-label="Save selection">
          <p>Select a save to load. Saves are stored in your browser for this prototype.</p>
          <div class="saveList" id="saveList"></div>
          <button class="btn ghost" id="saveBack">Back to Start</button>
        </div>

        <div id="characterScreen" class="screen" role="group" aria-label="Character creation">
          <p>Create your apprentice before entering the valley.</p>
          <div class="field">
            <label for="charName">Name</label>
            <input id="charName" type="text" placeholder="E.g., Liora" />
          </div>
          <div class="field">
            <label for="charFocus">Focus</label>
            <select id="charFocus">
              <option value="Elemental">Elemental</option>
              <option value="Restoration">Restoration</option>
              <option value="Arcane">Arcane</option>
            </select>
          </div>
          <button class="btn" id="createCharacter">Create Character</button>
          <button class="btn ghost" id="characterBack">Back</button>
        </div>

        <div id="zoneScreen" class="screen" role="group" aria-label="Zone selection">
          <p>Choose a starting zone. More locations will appear later.</p>
          <div class="stack">
            <button class="btn" data-zone="Forest" id="startForest">Forest (prototype)</button>
          </div>
          <button class="btn ghost" id="zoneBack">Back</button>
        </div>

        <div id="gameScreen" class="screen" role="group" aria-label="Placeholder game area">
          <p>Loading the zone will display a placeholder map. Use this screen to test layout transitions.</p>
          <div id="gameStage">FOREST – placeholder map</div>
          <div class="stack">
            <button class="btn secondary" id="saveProgress">Save Progress</button>
            <button class="btn ghost" id="gameBack">Exit to Start</button>
          </div>
        </div>
      </div>

      <div class="panel" aria-live="polite">
        <h2>Preview</h2>
        <div id="preview">
          <div id="previewText">Select an option to see the current screen.</div>
        </div>
      </div>
    </section>
  </main>

  <script>
    const screens = {
      start: document.getElementById('startScreen'),
      save: document.getElementById('saveScreen'),
      character: document.getElementById('characterScreen'),
      zone: document.getElementById('zoneScreen'),
      game: document.getElementById('gameScreen'),
    };

    const previewText = document.getElementById('previewText');
    const saveList = document.getElementById('saveList');
    const backButton = document.getElementById('backToStart');

    const saveKey = 'mageValleyPrototypeSaves';
    let currentCharacter = null;

    function setPreview(text) {
      previewText.textContent = text;
    }

    function hideAllScreens() {
      Object.values(screens).forEach((el) => el.classList.remove('active'));
    }

    function showScreen(screenName) {
      hideAllScreens();
      const target = screens[screenName];
      if (target) {
        target.classList.add('active');
      }
      switch (screenName) {
        case 'start':
          setPreview('Start menu — pick New Character or Load Save.');
          break;
        case 'save':
          setPreview('Save list — choose a save slot to load.');
          renderSaves();
          break;
        case 'character':
          setPreview('Character creation — enter a name and focus.');
          break;
        case 'zone':
          const name = currentCharacter?.name || 'your apprentice';
          setPreview(`Zone select — ${name} can begin in the Forest.`);
          break;
        case 'game':
          const zone = currentCharacter?.zone || 'FOREST';
          document.getElementById('gameStage').textContent = `${zone.toUpperCase()} – placeholder map`;
          setPreview('Placeholder game area — just a green canvas for now.');
          break;
      }
    }

    function loadSaves() {
      try {
        const raw = localStorage.getItem(saveKey);
        return raw ? JSON.parse(raw) : [];
      } catch (err) {
        console.warn('Unable to load saves', err);
        return [];
      }
    }

    function persistSaves(saves) {
      try {
        localStorage.setItem(saveKey, JSON.stringify(saves));
      } catch (err) {
        console.warn('Unable to save progress', err);
      }
    }

    function renderSaves() {
      const saves = loadSaves();
      saveList.innerHTML = '';
      if (!saves.length) {
        const empty = document.createElement('p');
        empty.textContent = 'No saves yet. Create a character to begin.';
        empty.style.color = 'var(--muted)';
        saveList.appendChild(empty);
        return;
      }

      saves.forEach((save, index) => {
        const card = document.createElement('div');
        card.className = 'saveCard';
        const info = document.createElement('div');
        info.innerHTML = `<strong>${save.name}</strong><br><span>Focus: ${save.focus} • Zone: ${save.zone || 'Forest'}</span>`;
        const btn = document.createElement('button');
        btn.className = 'btn secondary';
        btn.textContent = 'Load';
        btn.addEventListener('click', () => {
          currentCharacter = save;
          showScreen('zone');
        });
        card.append(info, btn);
        saveList.appendChild(card);
      });
    }

    function addSave(save) {
      const saves = loadSaves();
      saves.unshift(save);
      persistSaves(saves.slice(0, 6));
    }

    // Event wiring
    document.getElementById('newCharacter').addEventListener('click', () => {
      currentCharacter = null;
      showScreen('character');
    });

    document.getElementById('openSaves').addEventListener('click', () => {
      showScreen('save');
    });

    document.getElementById('saveBack').addEventListener('click', () => showScreen('start'));
    document.getElementById('characterBack').addEventListener('click', () => showScreen('start'));
    document.getElementById('zoneBack').addEventListener('click', () => showScreen('character'));
    document.getElementById('gameBack').addEventListener('click', () => showScreen('start'));
    backButton.addEventListener('click', () => showScreen('start'));

    document.getElementById('createCharacter').addEventListener('click', () => {
      const name = document.getElementById('charName').value.trim() || 'Apprentice';
      const focus = document.getElementById('charFocus').value;
      currentCharacter = { name, focus, zone: 'Forest' };
      addSave(currentCharacter);
      showScreen('zone');
    });

    document.getElementById('startForest').addEventListener('click', () => {
      if (!currentCharacter) {
        currentCharacter = { name: 'Apprentice', focus: 'Elemental', zone: 'Forest' };
      }
      currentCharacter.zone = 'Forest';
      showScreen('game');
    });

    document.getElementById('saveProgress').addEventListener('click', () => {
      if (currentCharacter) addSave(currentCharacter);
      setPreview('Progress saved locally.');
    });

    // Initialize
    showScreen('start');
  </script>
</body>
</html>
